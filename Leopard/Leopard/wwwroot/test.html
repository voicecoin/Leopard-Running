<!DOCTYPE html>
<html mip>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
  <title>UI</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/robot.css">
    <script src="js/jquery-3.2.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
<script>

var entities=[];
function loadEntities(){
	var data = {};
    data.agentId = "f3123461-cdeb-4f0f-bdea-8b2c984115e8";
    
    $.post('https://api.yaya.ai/api/Entity/getEntities', data,function(json) {
  	    console.log(json.success);
  	    entities=json;
  	    initEntities();
    });
}

function initEntities(){
	var html='';
	for(var i=0;i<entities.length;i++){
		html+='<div id="'+entities[i].id+'" class="input-group col-md-10 col-sm-12 col-center-nonblock entity" >';
		html+='<h5>'+entities[i].name+'</h5>';
		html+='<span class="input-group-addon glyphicon glyphicon-trash icon_noborder_top0 " style="display:none" id="del'+entities[i].id+'"></span>';
	    html+='</div>';
	}
	$("#entities").html(html);
	$(".entity").on('click', function() {
		goEntity($(this).attr('id'));
    });
	
	$(".entity").on('mouseenter', function() {
		controlDelButton($(this).attr('id'),true);
    });
	
	
	$(".entity").on('mouseleave', function() {
		controlDelButton($(this).attr('id'),false);
    });
	
	$(".entity").on('click', '.glyphicon-trash', function(event) {
         var id = $(this).attr("id").replace('del','');
         delEntity(id);
         event.stopPropagation();
     });
	
	 //onclick="goEntity(\''+entities[i].id+'\')" onmouseenter="controlDelButton(\''+entities[i].id+'\',true);" onmouseleave="controlDelButton(\''+entities[i].id+'\',false);"
}


function createEntity(){
	
}

function controlDelButton(id,flag){
	console.log(id+","+flag);
	if(flag)
		$("#del"+id).show();
	else
		$("#del"+id).hide();
}

function goEntity(id){
	alert(id);
}

function delEntity(id){
	var data = {};
    data.agentId = "f3123461-cdeb-4f0f-bdea-8b2c984115e8";
    data.entityId = id;
	$.post('https://api.yaya.ai/api/Entity/DeleteEntity', data,function(json) {
		
		console.log("del "+json);
		if(json.isError){
			
		}else{
			loadEntities();
		}
		
    });
}

$(document).ready(function(){ 

	 loadEntities();      
    });

    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?a0ffd8247abd4a38f87f03db9e6c79a7";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();

</script>
</head>

<body style="background:#ffffff;height:auto;width:100%;overflow:hidden;">
<!-- Stack the columns on mobile by making one full-width and the other half-width -->
<div class="container-fluid">
<div class="row" id="entities">
  <div class="col-xs-12 col-md-8">.col-xs-12 .col-md-8</div>
  <div class="col-xs-6 col-md-4">.col-xs-6 .col-md-4</div>
</div>

<!-- Columns start at 50% wide on mobile and bump up to 33.3% wide on desktop -->
<div class="row">
  <div class="col-xs-6 col-md-4">.col-xs-6 .col-md-4</div>
  <div class="col-xs-6 col-md-4">.col-xs-6 .col-md-4</div>
  <div class="col-xs-6 col-md-4">.col-xs-6 .col-md-4</div>
</div>

<!-- Columns are always 50% wide, on mobile and desktop -->
<div class="row">
  <div class="col-xs-6">.col-xs-6</div>
  <div class="col-xs-6">.col-xs-6</div>
</div>
</div>
</body>

</html>



